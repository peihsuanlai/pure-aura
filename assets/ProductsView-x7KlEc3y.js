import{a as _}from"./axios-L6U4YIEh.js";import{P as R}from"./ProductComponent-huUQBYeK.js";import{P as x}from"./PaginationComponent-BhBMVSfC.js";import{s as h}from"./alertHelper-rCyq43OB.js";import{_ as E,r as u,o as a,c as l,b as t,h as A,d,w as I,t as v,q as p,g as b,n as g,F as m,i as f}from"./index-9Ag9gVXO.js";import"./cartStore-Do1MSLOM.js";var M={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"product-api",BASE_URL:"/pure-aura/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:C,VITE_API_PATH:P,BASE_URL:S}=M,T={data(){return{banner:`${S}images/product-banner.png`,isMenuVisible:!0,isRotated:!1,menu:[],currentCategory:"全系列商品",products:[],pagination:{},isLoading:!0}},methods:{toggleMenu(){this.isMenuVisible=!this.isMenuVisible,this.isRotated=!this.isRotated},getCategory(){_.get(`${C}/api/${P}/products/all`).then(n=>{const e=[];n.data.products.forEach(c=>{const r=c.category.trim();e.includes(r)||(e.push(r),this.menu=e)})}).catch(()=>{h()})},getProducts(n=1,e=""){this.isLoading=!0,_.get(`${C}/api/${P}/products?category=${e}&page=${n}`).then(c=>{const{products:r,pagination:o}=c.data;this.products=r,this.pagination=o,this.currentCategory=e||"全系列商品",this.isLoading=!1}).catch(()=>{h()})}},watch:{"$route.query.category":{handler(n){this.getProducts(1,n||"")},immediate:!0}},components:{PaginationComponent:x,ProductComponent:R},mounted(){this.getCategory()}},B={class:"reveal"},U={class:"container-lg"},D={"aria-label":"breadcrumb"},O={class:"breadcrumb"},N={class:"breadcrumb-item"},q=["textContent"],z={class:"row product-page"},F={class:"col-lg-3"},H={class:"left-menu mb-4 mb-lg-0"},j={class:"menu-list-container"},G=["textContent","onClick"],J={class:"col-lg-9"},K={class:"row product-list mb-5"};function Q(n,e,c,r,o,i){const y=u("RouterLink"),L=u("ProductComponent"),V=u("PaginationComponent"),k=u("LoadingOverlay");return a(),l(m,null,[t("section",{style:A({backgroundImage:`url(${o.banner})`}),class:"page-banner reveal","data-origin":"top"},e[3]||(e[3]=[t("h2",null,"全系列商品",-1)]),4),t("main",B,[t("div",U,[t("nav",D,[t("ol",O,[e[5]||(e[5]=t("li",{class:"breadcrumb-item"},[t("a",{href:"/"},"首頁")],-1)),t("li",N,[d(y,{to:"/products"},{default:I(()=>e[4]||(e[4]=[b("全系列商品")])),_:1})]),t("li",{class:"breadcrumb-item active","aria-current":"page",textContent:v(o.currentCategory)},null,8,q)])]),t("div",z,[t("div",F,[t("div",H,[t("a",{href:"#",class:"menu-switch",onClick:e[0]||(e[0]=p((...s)=>i.toggleMenu&&i.toggleMenu(...s),["prevent"]))},[e[6]||(e[6]=b("分類 ")),t("i",{class:g(["bi bi-chevron-right arrow-icon",[o.isRotated?"rotate":""]])},null,2)]),t("div",j,[t("ul",{class:g(["mb-0 list-unstyled menu-list d-lg-block",[o.isMenuVisible?"d-none":""]])},[t("li",null,[t("a",{href:"#",onClick:e[1]||(e[1]=p(s=>i.getProducts(1),["prevent"])),class:g({active:o.currentCategory==="全系列商品"})},"全系列商品",2)]),(a(!0),l(m,null,f(o.menu,(s,w)=>(a(),l("li",{key:"category"+(w+1)},[t("a",{href:"#",class:g({active:o.currentCategory===s}),textContent:v(s),onClick:p(W=>i.getProducts(1,s),["prevent"])},null,10,G)]))),128))],2)])])]),t("div",J,[t("div",K,[(a(!0),l(m,null,f(o.products,s=>(a(),l("div",{class:"col-sm-6 col-lg-4",key:s.id},[d(L,{product:s},null,8,["product"])]))),128))]),d(V,{pages:o.pagination,onSwitchPage:i.getProducts},null,8,["pages","onSwitchPage"])])])]),d(k,{active:o.isLoading,"onUpdate:active":e[2]||(e[2]=s=>o.isLoading=s)},null,8,["active"])])],64)}const ot=E(T,[["render",Q]]);export{ot as default};
