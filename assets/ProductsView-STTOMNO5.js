import{a as C}from"./axios-L6U4YIEh.js";import{_ as R,a as E,r as p,o as a,c as l,b as t,h as f,d,w as y,t as c,q as m,g as _,n as g,F as h,i as P}from"./index-6kkLmJOv.js";import{c as T}from"./cartStore-rk_UojvA.js";import{P as A}from"./PaginationComponent-RU97oRX_.js";import{s as k}from"./alertHelper-rCyq43OB.js";var I={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"product-api",BASE_URL:"/pure-aura/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:L,VITE_API_PATH:x,BASE_URL:M}=I,S={data(){return{banner:`${M}images/product-banner.png`,isMenuVisible:!0,isRotated:!1,menu:[],currentCategory:"全系列商品",products:[],pagination:{},isLoading:!0}},methods:{toggleMenu(){this.isMenuVisible=!this.isMenuVisible,this.isRotated=!this.isRotated},getCategory(){C.get(`${L}/api/${x}/products/all`).then(n=>{const e=[];n.data.products.forEach(u=>{const i=u.category.trim();e.includes(i)||(e.push(i),this.menu=e)})}).catch(()=>{k()})},getProducts(n=1,e=""){this.isLoading=!0,C.get(`${L}/api/${x}/products?category=${e}&page=${n}`).then(u=>{const{products:i,pagination:o}=u.data;this.products=i,this.pagination=o,this.currentCategory=e||"全系列商品",this.isLoading=!1}).catch(()=>{k()})},...E(T,["addToCart"])},watch:{"$route.query.category":{handler(n){this.getProducts(1,n||"")},immediate:!0}},components:{PaginationComponent:A},mounted(){this.getCategory()}},U={class:"reveal"},B={class:"container-lg"},N={"aria-label":"breadcrumb"},$={class:"breadcrumb"},D={class:"breadcrumb-item"},O=["textContent"],q={class:"row product-page"},z={class:"col-lg-3"},F={class:"left-menu mb-4 mb-lg-0"},H={class:"menu-list-container"},j=["textContent","onClick"],G={class:"col-lg-9"},J={class:"row product-list mb-5"},K=["textContent"],Q={class:"price"},W=["textContent"],X=["textContent"],Y=["onClick"];function Z(n,e,u,i,o,r){const v=p("RouterLink"),V=p("PaginationComponent"),w=p("LoadingOverlay");return a(),l(h,null,[t("section",{style:f({backgroundImage:`url(${o.banner})`}),class:"page-banner reveal","data-origin":"top"},e[3]||(e[3]=[t("h2",null,"全系列商品",-1)]),4),t("main",U,[t("div",B,[t("nav",N,[t("ol",$,[e[5]||(e[5]=t("li",{class:"breadcrumb-item"},[t("a",{href:"/"},"首頁")],-1)),t("li",D,[d(v,{to:"/products"},{default:y(()=>e[4]||(e[4]=[_("全系列商品")])),_:1})]),t("li",{class:"breadcrumb-item active","aria-current":"page",textContent:c(o.currentCategory)},null,8,O)])]),t("div",q,[t("div",z,[t("div",F,[t("a",{href:"#",class:"menu-switch",onClick:e[0]||(e[0]=m((...s)=>r.toggleMenu&&r.toggleMenu(...s),["prevent"]))},[e[6]||(e[6]=_("分類 ")),t("i",{class:g(["bi bi-chevron-right arrow-icon",[o.isRotated?"rotate":""]])},null,2)]),t("div",H,[t("ul",{class:g(["mb-0 list-unstyled menu-list d-lg-block",[o.isMenuVisible?"d-none":""]])},[t("li",null,[t("a",{href:"#",onClick:e[1]||(e[1]=m(s=>r.getProducts(1),["prevent"])),class:g({active:o.currentCategory==="全系列商品"})},"全系列商品",2)]),(a(!0),l(h,null,P(o.menu,(s,b)=>(a(),l("li",{key:"category"+(b+1)},[t("a",{href:"#",class:g({active:o.currentCategory===s}),textContent:c(s),onClick:m(tt=>r.getProducts(1,s),["prevent"])},null,10,j)]))),128))],2)])])]),t("div",G,[t("div",J,[(a(!0),l(h,null,P(o.products,s=>(a(),l("div",{class:"col-sm-6 col-lg-4",key:s.id},[d(v,{to:{name:"Product",params:{id:s.id}},class:"item"},{default:y(()=>[t("div",{class:"img",style:f({backgroundImage:`url(${s.imageUrl})`})},e[7]||(e[7]=[t("div",{class:"overlay"},[t("div",null,"查看細節")],-1)]),4),t("h4",{class:"product-title",textContent:c(s.title)},null,8,K),t("div",Q,[t("span",{class:"original-price",textContent:c("NT$"+n.$filter.currency(s.origin_price))},null,8,W),t("span",{class:"offer-price",textContent:c("NT$"+n.$filter.currency(s.price))},null,8,X)])]),_:2},1032,["to"]),t("button",{type:"button",class:"add-btn",onClick:b=>n.addToCart(s.id)},e[8]||(e[8]=[t("i",{class:"bi bi-cart3"},null,-1),_(" 加入購物車 ")]),8,Y)]))),128))]),d(V,{pages:o.pagination,onSwitchPage:r.getProducts},null,8,["pages","onSwitchPage"])])])]),d(w,{active:o.isLoading,"onUpdate:active":e[2]||(e[2]=s=>o.isLoading=s)},null,8,["active"])])],64)}const rt=R(S,[["render",Z]]);export{rt as default};
