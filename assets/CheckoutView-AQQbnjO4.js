import{a as p}from"./axios-L6U4YIEh.js";import{s as c}from"./alertHelper-rCyq43OB.js";import{_ as h,r as f,o as l,c as r,b as t,f as g,n as a,F as _,i as y,j as d,t as o,d as C,h as b}from"./index-FCRSNV6O.js";var k={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"product-api",BASE_URL:"/pure-aura/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:v,VITE_API_PATH:m}=k,I={data(){return{order:{user:{}},orderId:"",isLoading:!0}},methods:{getOrder(){p.get(`${v}/api/${m}/order/${this.orderId}`).then(i=>{this.isLoading=!1,this.order=i.data.order}).catch(()=>{c()})},payOrder(){this.isLoading=!0,p.post(`${v}/api/${m}/pay/${this.orderId}`).then(()=>{this.isLoading=!1,this.getOrder()}).catch(()=>{c()})}},mounted(){this.orderId=this.$route.params.orderId,this.getOrder()}},T={class:"cart-page no-banner"},E={class:"container-lg"},L={class:"row justify-content-center mb-5 reveal","data-origin":"top"},O={class:"col-lg-7"},P={class:"row step-list"},V={class:"item"},S={class:"col"},A={class:"item"},N={class:"cart-table reveal"},w={"data-th":"圖片"},R=["textContent"],U=["textContent"],B={"data-th":"數量"},D=["textContent"],j={"data-th":"總價"},z=["textContent"],F={key:0,class:"text-danger"},H=["textContent"],q={class:"total-summary mb-5 reveal"},M={class:"d-flex justify-content-between fw-bold"},G=["textContent"],J={class:"order-info reveal"},K={key:0},Q=["textContent"],W=["textContent"],X=["textContent"],Y=["textContent"],Z=["textContent"],$={key:1},tt=["textContent"],et={key:0,class:"text-danger"},st={key:1,class:"text-success"},nt={key:0,class:"text-center reveal",style:{"margin-top":"60px"}};function ot(i,e,lt,rt,s,u){const x=f("LoadingOverlay");return l(),r(_,null,[t("main",T,[t("div",E,[e[18]||(e[18]=g('<nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="/">首頁</a></li><li class="breadcrumb-item active" aria-current="page">購物車</li></ol></nav><h2 class="reveal" data-origin="top">購物車</h2>',2)),t("div",L,[t("div",O,[t("div",P,[e[6]||(e[6]=t("div",{class:"col"},[t("div",{class:"item"},[t("div",{class:"step d-flex flex-column align-items-center"},[t("span",null,"STEP"),t("span",null,"1")]),t("h5",null,"確認訂單")])],-1)),t("div",{class:a(["col",{active:!s.order.is_paid}])},[t("div",V,[t("div",{class:a(["step d-flex flex-column align-items-center",{active:!s.order.is_paid}])},e[2]||(e[2]=[t("span",null,"STEP",-1),t("span",null,"2",-1)]),2),e[3]||(e[3]=t("h5",null,"結帳付款",-1))])],2),t("div",S,[t("div",A,[t("div",{class:a(["step d-flex flex-column align-items-center",{active:s.order.is_paid}])},e[4]||(e[4]=[t("span",null,"STEP",-1),t("span",null,"3",-1)]),2),e[5]||(e[5]=t("h5",null,"訂單完成",-1))])])])])]),t("table",N,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"品項"),t("th",null,"單價"),t("th",null,"數量"),t("th",null,"總價")])],-1)),t("tbody",null,[s.order.products?(l(!0),r(_,{key:0},y(s.order.products,n=>(l(),r("tr",{key:n.id},[t("td",w,[t("div",{class:"img",style:b({backgroundImage:`url(${n.product.imageUrl})`})},null,4)]),t("td",{"data-th":"品項",textContent:o(n.product.title)},null,8,R),t("td",{"data-th":"單價",textContent:o("NT$"+i.$filter.currency(n.product.price))},null,8,U),t("td",B,[t("span",{textContent:o(n.qty)},null,8,D)]),t("td",j,[t("div",{textContent:o("NT$"+i.$filter.currency(n.total)),class:a({"text-decoration-line-through":n.final_total!==n.total})},null,10,z),n.final_total!==n.total?(l(),r("div",F,[e[7]||(e[7]=t("span",null,"折扣後：",-1)),t("span",{textContent:o("NT$"+i.$filter.currency(n.final_total))},null,8,H)])):d("",!0)])]))),128)):d("",!0)])]),t("div",q,[t("div",M,[e[9]||(e[9]=t("span",null,"應付總額",-1)),t("span",{textContent:o("NT$"+i.$filter.currency(s.order.total))},null,8,G)])]),t("div",J,[e[17]||(e[17]=t("h4",null,"訂購資訊",-1)),s.order.is_paid?(l(),r("div",K,[e[10]||(e[10]=t("span",null,"訂單編號",-1)),t("span",{textContent:o(s.order.id)},null,8,Q)])):d("",!0),t("div",null,[e[11]||(e[11]=t("span",null,"姓名",-1)),t("span",{textContent:o(s.order.user.name)},null,8,W)]),t("div",null,[e[12]||(e[12]=t("span",null,"信箱",-1)),t("span",{textContent:o(s.order.user.email),style:{"word-break":"break-all"}},null,8,X)]),t("div",null,[e[13]||(e[13]=t("span",null,"電話",-1)),t("span",{textContent:o(s.order.user.tel)},null,8,Y)]),t("div",null,[e[14]||(e[14]=t("span",null,"地址",-1)),t("span",{textContent:o(s.order.user.address)},null,8,Z)]),s.order.message?(l(),r("div",$,[e[15]||(e[15]=t("span",null,"備註",-1)),t("span",{textContent:o(s.order.message)},null,8,tt)])):d("",!0),t("div",null,[e[16]||(e[16]=t("span",null,"付款狀態",-1)),s.order.is_paid?(l(),r("span",st,"付款完成")):(l(),r("span",et,"尚未付款"))])]),s.order.is_paid?d("",!0):(l(),r("div",nt,[t("button",{type:"button",class:"cta-btn",onClick:e[0]||(e[0]=(...n)=>u.payOrder&&u.payOrder(...n))},"確認付款")]))])]),C(x,{active:s.isLoading,"onUpdate:active":e[1]||(e[1]=n=>s.isLoading=n)},null,8,["active"])],64)}const ut=h(I,[["render",ot]]);export{ut as default};
